<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
<!-- ... existing code ... -->
        </h1>

        <!-- Mesej Status untuk memuatkan data -->
        <div id="status" class="text-center text-gray-500 mb-4">
            Memuatkan data peserta dari pelayan...
        </div>

        <!-- Pilihan Fail CSV (DIALIH KELUAR) -->
        <!-- Bahagian Muat Naik Fail tidak diperlukan lagi -->

        <!-- Pilihan Peserta -->
        <div class="mb-6">
            <label for="peserta-select" class="block text-sm font-medium text-gray-700 mb-2">
                1. Pilih Peserta: (Data dimuatkan secara automatik)
            </label>
            <select id="peserta-select" class="w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500" disabled>
                <option>Memuatkan data...</option>
                <!-- Pilihan akan diisi oleh JavaScript -->
<!-- ... existing code ... -->
        <div class="mb-4 text-center">
            <label class="block text-sm font-medium text-gray-700 mb-2">2. Pilih Paparan:</label>
            <div class="inline-flex rounded-lg shadow-sm">
                <button id="view-domain-btn" type="button" class="relative inline-flex items-center px-4 py-2 rounded-l-md border border-gray-300 bg-blue-600 text-white text-sm font-medium hover:bg-blue-700 focus:z-10 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500">
<!-- ... existing code ... -->
        const selectEl = document.getElementById('peserta-select');
        const ringkasanEl = document.getElementById('ringkasan');
        // 'uploadEl' tidak diperlukan lagi
        // const uploadEl = document.getElementById('csv-upload');

        // Rujukan untuk elemen-elemen baru
<!-- ... existing code ... -->
            return { tahap: 'Asas', color: 'text-red-700' };
        }

        /**
         * ** DIUBAH SUAI: Fungsi baru untuk memuatkan data dari pelayan **
         */
        async function loadDataFromServer() {
            const csvFileName = 'data_propkes_pra.csv'; // Nama fail data kita
            try {
                statusEl.textContent = `Memuat turun fail ${csvFileName}...`;
                statusEl.className = "text-center text-gray-500 mb-4";
                
                const response = await fetch(csvFileName);
                
                if (!response.ok) {
                    throw new Error(`Gagal memuatkan fail: ${response.statusText} (Pastikan ${csvFileName} ada dalam repositori)`);
                }
                
                const csvText = await response.text();
                processData(csvText);

            } catch (error) {
                console.error("Ralat memuatkan data dari pelayan:", error);
                statusEl.textContent = `Ralat: ${error.message}`;
                statusEl.className = "text-center text-red-600 font-bold mb-4";
                selectEl.innerHTML = '<option>Gagal memuatkan data</option>';
                selectEl.disabled = true;
            }
        }

        /**
         * Mengendalikan fail yang dimuat naik (TIDAK DIGUNAKAN LAGI, TAPI DIKEKALKAN JIKA PERLU)
<!-- ... existing code ... -->
                
                if (!row[NAMA_INDEX] || row[NAMA_INDEX].trim() === '') {
                    console.warn("Baris dilangkau (tiada nama):", row);
<!-- ... existing code ... -->
                barChart.update();
            }
        }

        // --- MULAKAN APLIKASI ---
        
        // ** DIUBAH SUAI: Panggil fungsi 'loadDataFromServer' apabila halaman dimuatkan **
        document.addEventListener('DOMContentLoaded', () => {
            loadDataFromServer();
        });

        // Event listener untuk butang toggle
<!-- ... existing code ... -->